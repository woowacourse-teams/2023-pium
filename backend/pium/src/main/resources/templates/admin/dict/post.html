<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/common/layout}"
      lang="ko">
<th:block layout:fragment="content">
    <div class="container mt-5">

        <h1 class="text-center text-success mb-4">식물 등록</h1>

        <form class="form-container">

            <label for="name">이름:</label>
            <input type="text" id="name" name="name" required><br>

            <label for="image">이미지 URL:</label>
            <input type="text" id="image" name="image" required><br>

            <label for="familyName">과명:</label>
            <input type="text" id="familyName" name="familyName" required><br>

            <label for="smell">향:</label>
            <input type="text" id="smell" name="smell"><br>

            <label for="poison">독성:</label>
            <input type="text" id="poison" name="poison"><br>

            <label for="manageLevel">관리 난이도:</label>
            <input type="text" id="manageLevel" name="manageLevel"><br>

            <label for="growSpeed">성장 속도:</label>
            <input type="text" id="growSpeed" name="growSpeed"><br>

            <label for="requireTemp">요구 온도:</label>
            <input type="text" id="requireTemp" name="requireTemp"><br>

            <label for="minimumTemp">최소 온도:</label>
            <input type="text" id="minimumTemp" name="minimumTemp"><br>

            <label for="requireHumidity">요구 습도:</label>
            <input type="text" id="requireHumidity" name="requireHumidity"><br>

            <label for="postingPlace">배치 장소:</label>
            <input type="text" id="postingPlace" name="postingPlace"><br>

            <label for="specialManageInfo">특별 관리 정보:</label>
            <input type="text" id="specialManageInfo" name="specialManageInfo"><br>

            <label for="spring">물 주기(봄):</label>
            <input type="text" id="spring" name="spring"><br>

            <label for="summer">물 주기(여름):</label>
            <input type="text" id="summer" name="summer"><br>

            <label for="autumn">물 주기(가을):</label>
            <input type="text" id="autumn" name="autumn"><br>

            <label for="winter">물 주기(겨울):</label>
            <input type="text" id="winter" name="winter"><br>

            <button type="button" class="btn btn-primary" th:onclick="|submitForm()|" th:text="등록"></button>
        </form>
    </div>
</th:block>
<th:block layout:fragment="script">
    <script>
        function submitForm() {
            const formElement = document.getElementById("plantPostForm");
            const formData = new FormData(formElement);

            fetch(`/dictionary-plants`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(Object.fromEntries(formData))
            })
                .then(response => {
                    if (response.ok) {
                        let location = response.headers.get("location");
                        window.location.replace(`/admin/dict/${location}`)
                    } else {
                        throw new Error('서버 응답 오류');
                    }
                })
                .then(data => {
                    console.log('서버 응답:', data);
                })
                .catch(error => {
                    console.error('오류 발생:', error);
                });
        }
    </script>
</th:block>
</html>
